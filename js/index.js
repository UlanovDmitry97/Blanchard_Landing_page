document.addEventListener("DOMContentLoaded",function(){document.getElementById("burger").addEventListener("click",function(){document.getElementById("menu").classList.add("menu_active")}),document.getElementById("close").addEventListener("click",function(){document.getElementById("menu").classList.remove("menu_active")});const e=document.querySelectorAll(".dropdown"),t=document.querySelectorAll(".header-bottom__btn");function o(t){const o=t.dataset.indexNumber,n=document.querySelectorAll(".header-bottom__btn");for(const t of e)t.dataset.indexNumber===o?t.classList.toggle("is-active"):t.classList.remove("is-active");for(const e of n)e.dataset.indexNumber!==o&&e.classList.remove("header-bottom__btn_is-active")}for(const e of t)e.addEventListener("click",function(){o(this),this.classList.toggle("header-bottom__btn_is-active")});document.addEventListener("click",o=>{let n=o.target;for(const e of t){if(e==n){its_btnsHeader=!0;break}its_btnsHeader=!1}for(const t of e){if(t==n||t.contains(n)){its_dropdown=!0;break}its_dropdown=!1}its_btnsHeader||its_dropdown||(t.forEach(e=>e.classList.remove("header-bottom__btn_is-active")),e.forEach(e=>e.classList.remove("is-active")))}),document.getElementById("search_btn-1024").addEventListener("click",function(){document.getElementById("search-1024").classList.toggle("header-search-1024__input_active"),document.querySelector(".header-search-1024").classList.toggle("header__search_wrap_active")});document.querySelector(".header-search-1024"),document.querySelector(".header-search-1024__btn");window.addEventListener("click",e=>{e.target.closest(".header-search-1024")||(document.querySelector(".header-search-1024__input").classList.remove("header-search-1024__input_active"),document.querySelector(".header-search-1024").classList.remove("header__search_wrap_active"))}),document.getElementById("search_btn-768").addEventListener("click",function(){document.querySelector(".header-search-768_wrap").classList.add("is-active__header__search_wrap")}),document.getElementById("search_btn-close").addEventListener("click",function(){document.querySelector(".header-search-768_wrap").classList.remove("is-active__header__search_wrap")});const n=document.querySelector("#customSelect, #customSelect1");new Choices(n,{searchEnabled:!1}),new Swiper(".swiper-hero",{allowTouchMove:!1,loop:!0,effect:"fade",speed:1e4,autoplay:{delay:1e4}});new Swiper(".slides-container",{slidesPerView:1,grid:{rows:1,fill:"row"},spaceBetween:20,pagination:{el:".gallery .gallery-right__pagination",type:"fraction"},navigation:{nextEl:".gallery-right__btn-next",prevEl:".gallery-right__btn-prev"},breakpoints:{480:{slidesPerView:2,slidesPerGroup:2,grid:{rows:2},spaceBetween:36},1200:{slidesPerView:3,slidesPerGroup:3,grid:{rows:2},spaceBetween:50}}});!function(){const e=document.querySelectorAll(".modal"),t=document.querySelectorAll(".gallery__slide"),o=document.querySelector(".modals__wrap");document.querySelectorAll(".modal__close-btn").forEach(e=>{e.addEventListener("click",e=>{o.classList.remove("modals__wrap-visable"),e.currentTarget.parentNode.parentNode.classList.remove("modal-visable"),document.body.classList.remove("scroll-hidden")})}),t.forEach(t=>{t.addEventListener("click",t=>{const n=t.currentTarget.getAttribute("data-path");document.querySelector(`[data-target="${n}"]`).classList.add("modal-visable"),o.classList.add("modals__wrap-visable"),document.body.classList.add("scroll-hidden"),document.querySelector(".modals__wrap-visable").addEventListener("click",t=>{let n=t.target;for(const t of e){if(t==n||t.contains(n)){its_modal=!0;break}its_modal=!1}its_modal||(o.classList.remove("modals__wrap-visable"),e.forEach(e=>e.classList.remove("modal-visable")),document.body.classList.remove("scroll-hidden"))})})})}(),document.querySelectorAll(".catalog__tabs-btn").forEach(e=>{e.addEventListener("click",e=>{const t=e.currentTarget.dataset.path;document.querySelectorAll(".catalog__content").forEach(e=>{e.classList.remove("catalog__content_active")}),document.querySelectorAll(".catalog__tabs-btn").forEach(e=>{e.classList.remove("catalog__tabs-btn_active")}),document.querySelector(`[data-path="${t}"]`).classList.add("catalog__tabs-btn_active"),document.querySelector(`[data-target="${t}"]`).classList.add("catalog__content_active")})}),document.querySelectorAll(".accordion__artists").forEach(e=>{e.addEventListener("click",t=>{const o=t.currentTarget.dataset.path;document.querySelectorAll(".content-left").forEach(e=>{e.classList.remove("content-left_active")}),document.querySelectorAll(".accordion__artists").forEach(e=>{e.classList.remove("accordion__artists_active")}),e.classList.add("accordion__artists_active"),document.querySelector(`[data-target="${o}"]`).classList.add("content-left_active")})}),$(function(){$(".accordion").accordion({heightStyle:"content",collapsible:!0})});const c=document.querySelectorAll(".accordion__element");for(const e of c)e.addEventListener("click",function(){e.parentNode.classList.toggle("accordion__item-active");for(const e of c)e!==this&&e.parentNode.classList.remove("accordion__item-active")});$(document).ready(function(){$("body,html").on("click","a",function(e){e.preventDefault();var t=$(this).attr("href"),o=$(t).offset().top;$("body,html").animate({scrollTop:o},1500)})});new Swiper(".developments__slides-container",{spaceBetween:27,pagination:{el:".swiper-pagination"}}),new Swiper(".editions__slides-container",{pagination:{el:".editions__slider-pagination",type:"fraction"},navigation:{nextEl:".editions__btn-next",prevEl:".editions__btn-prev"},breakpoints:{1200:{spaceBetween:50,slidesPerView:3,slidesPerGroup:3},968:{spaceBetween:50,slidesPerView:2,slidesPerGroup:2},580:{spaceBetween:34,slidesPerView:2,slidesPerGroup:2}}});const a=580;let r;const s=document.querySelector(".js-accordion-wrap"),i=s.querySelector(".js-checkboxes"),d=(s.querySelector(".js-accordion-heading"),document.querySelector(".editions__fieldset"));function l(){return Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.body.clientWidth,document.documentElement.clientWidth)}function u(e){i.append(e.target.parentElement),e.target.removeEventListener("change",u)}function m(e,t){const o=Array.from(s.querySelectorAll(".js-checkbox"));o.sort(function(e,t){const o=parseInt(e.parentNode.dataset.position),n=parseInt(t.parentNode.dataset.position);return o<n?-1:o>n?1:0}),t.newHeader[0]?o.forEach(function(e){i.append(e.parentNode),e.removeEventListener("change",u)}):o.forEach(function(e){e.checked&&(d.before(e.parentNode),e.addEventListener("change",u))})}function _(){const e=l(),t=Array.from(s.querySelectorAll(".js-checkbox"));e>a&&r?(r.accordion("destroy"),r=!1,t.forEach(function(e){i.append(e.parentNode)})):e<=a&!r&&(r=$(".js-accordion").accordion({header:".js-accordion-heading",collapsible:!0,active:!1,icons:!1,heightStyle:"auto",beforeActivate:function(e,t){m(0,t)}}),t.forEach(function(e){e.checked&&d.before(e.parentNode)}))}function p(){document.querySelector(".catalog").scrollIntoView({behavior:"smooth",block:"end"})}function f(){const e=document.querySelectorAll(".accordion__artists"),t=l();t<580&&e.forEach(e=>{e.addEventListener("click",p)}),t>580&&e.forEach(e=>{e.removeEventListener("click",p)})}function h(){const e=l(),t=document.querySelectorAll(".developments__card-link"),o=document.querySelector(".developments__card-btn");if(e>968)for(const e in t)e>2&&t[e].setAttribute("tabindex","-1");if(e<968&&e>580)for(const e in t)e>1&&t[e].setAttribute("tabindex","-1");o.addEventListener("click",function(){for(const e of t)e.setAttribute("tabindex","0")}),o.addEventListener("keydown",function(e){13===e.keyCode&&o.click()})}_(),f(),h(),function(){const e=document.querySelectorAll(".marker");for(const t of e)t.addEventListener("click",function(){t.classList.toggle("marker-active"),t.childNodes[1].classList.toggle("tooltip-visable")}),t.addEventListener("keydown",function(e){13===e.keyCode&&t.click()});new Swiper(".projects__slider-container",{navigation:{nextEl:".projects__btn-next",prevEl:".projects__btn-prev"},breakpoints:{1200:{spaceBetween:50,slidesPerView:3,slidesPerGroup:3},968:{spaceBetween:50,slidesPerView:2,slidesPerGroup:2},580:{spaceBetween:34,slidesPerView:2,slidesPerGroup:2}}})}();const v=new Inputmask("+7 (999)-999-99-99"),g=document.querySelector(".contacts__input_tell");function y(){const e=l(),t=document.getElementById("map"),o=document.querySelector(".contacts__address"),n=document.querySelector(".contacts__container");e<580&&(t.remove(),o.after(t)),e>580&&(t.remove(),n.append(t))}v.mask(g),new JustValidate(".contacts__form",{rules:{name:{required:!0,minLength:2,maxLength:20},tel:{required:!0,function:(e,t)=>{const o=g.inputmask.unmaskedvalue();return Number(o)&&10===o.toString().length}}},messages:{name:"Недопустимый формат, имя должно содержать от 2 до 20 букв",tel:"Недопустимый формат телефона, введите телефон полностью"},colorWrong:"#D11616",submitHandler:function(e){let t=new FormData(e);fetch("mail.php",{method:"POST",body:t}).then(()=>{console.log("Отправлено"),e.reset(),function(){const e=document.querySelector(".modal-send-wrap"),t=document.querySelector(".modal-send");e.classList.add("modal-send-wrap-visable"),t.classList.add("modal-send-visable"),document.body.classList.add("scroll-hidden"),setTimeout(function(){t.classList.remove("modal-send-visable"),e.classList.remove("modal-send-wrap-visable"),document.body.classList.remove("scroll-hidden")},1500)}()}).catch(()=>console.log("Ошибка"))}}),ymaps.ready(function(){document.getElementById("map");const e=new ymaps.Map("map",{center:[55.758468,37.601088],zoom:14,controls:["geolocationControl","zoomControl"]},{suppressMapOpenBlock:!0,geolocationControlSize:"large",geolocationControlPosition:{top:"200px",right:"20px"},geolocationControlFloat:"none",zoomControlSize:"small",zoomControlFloat:"none",zoomControlPosition:{top:"120px",right:"20px"}});let t=new ymaps.Placemark([55.758468,37.601088],{},{iconLayout:"default#image",iconImageHref:"../img/map__icon.svg",iconImageSize:[20,20],iconImageOffset:[-3,-42]});e.geoObjects.add(t),setTimeout(()=>{e.container.fitToViewport()},5e3)}),y(),window.addEventListener("resize",function(){_(),y(),h(),f()}),lazyload()});
